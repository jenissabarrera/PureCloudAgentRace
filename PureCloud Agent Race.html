<!DOCTYPE html>
<html>
	<head>
		<title>PureCloud Agent Race</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<style>
			canvas {
					border:1px solid #d3d3d3;
					background-color: Gainsboro;
				}
		</style>
	</head>
	
	<body onload="startGame()">
		<script>
			var Agent1, Agent2, Agent3, Agent4;
			var StartLine, Finish1, Finish2, Finish3, Finish4, Finish5, Finish6, Finish7, Finish8, Finish9, Finish10, Finish11, Finish12;
			
			var image1 = new Image();
			var image2 = new Image();
			var image3 = new Image();
			var image4 = new Image();
			
			image1.src = "images\\lady1.png";
			image2.src = "images\\man1.png";
			image3.src = "images\\lady2.png";
			image4.src = "images\\man2.png";

			function startGame() {				
				Agent1 = new ImageComponent(100, 100, "Agent1", 10, 30);
				Agent2 = new ImageComponent(100, 100, "Agent2", 10, 180);
				Agent3 = new ImageComponent(100, 100, "Agent3", 10, 330);
				Agent4 = new ImageComponent(100, 100, "Agent4", 10, 480);
				
				StartLine = new component(10, 600, "DimGray", 115, 0);				
				Finish1 = new component(25, 100, "Black", 950, 0);
				Finish2 = new component(25, 100, "White", 975, 0);
				Finish3 = new component(25, 100, "White", 950, 100);
				Finish4 = new component(25, 100, "Black", 975, 100);
				Finish5 = new component(25, 100, "Black", 950, 200);
				Finish6 = new component(25, 100, "White", 975, 200);
				Finish7 = new component(25, 100, "White", 950, 300);
				Finish8 = new component(25, 100, "Black", 975, 300);
				Finish9 = new component(25, 100, "Black", 950, 400);
				Finish10 = new component(25, 100, "White", 975, 400);
				Finish11 = new component(25, 100, "White", 950, 500);
				Finish12 = new component(25, 100, "Black", 975, 500);
					
				myGameArea.start();
			}

			var myGameArea = {
				canvas : document.createElement("canvas"),
				start : function() {
					this.canvas.width = 1000;
					this.canvas.height = 600;
					this.canvas.id = "canvas";
					this.context = this.canvas.getContext("2d");
					document.body.insertBefore(this.canvas, document.body.childNodes[0]);
					this.interval = setInterval(updateGameArea, 20);
				},
				clear : function() {
					this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
				}
			}
			
			function ImageComponent(width, height, color, x, y) {
				this.width = width;
				this.height = height;
				this.speedX = 0;
				this.x = x;
				this.y = y;
				this.update = function() {
					ctx = myGameArea.context;
					
					if (color === "Agent1") {
						ctx.drawImage(image1, this.x, this.y, this.width, this.height);
					} else if (color =="Agent2") {
						ctx.drawImage(image2, this.x, this.y, this.width, this.height);
					} else if (color === "Agent3") {
						ctx.drawImage(image3, this.x, this.y, this.width, this.height);
					} else if (color === "Agent4"){
						ctx.drawImage(image4, this.x, this.y, this.width, this.height);
					}
				}
				this.newPos = function() {
					this.x += this.speedX;
				}
			}

			function component(width, height, color, x, y) {
				this.width = width;
				this.height = height;
				this.speedX = 0;
				this.x = x;
				this.y = y;
				this.update = function() {
					ctx = myGameArea.context;
					ctx.fillStyle = color;
					ctx.fillRect(this.x, this.y, this.width, this.height);
				}
			}

			function updateGameArea() {
				myGameArea.clear();
				
				StartLine.update();
				Finish1.update();
				Finish2.update();
				Finish3.update();
				Finish4.update();
				Finish5.update();
				Finish6.update();
				Finish7.update();
				Finish8.update();
				Finish9.update();
				Finish10.update();
				Finish11.update();
				Finish12.update();
				
				Agent1.newPos();
				Agent1.update();
				
				Agent2.newPos();
				Agent2.update();
				
				Agent3.newPos();
				Agent3.update();
				
				Agent4.newPos();
				Agent4.update();
			}
			
			function agent1move() {
				Agent1.speedX = 1;
			}
			
			function agent2move() {
				Agent2.speedX = 1.25;
			}
			
			function agent3move() {
				Agent3.speedX = 1.5;
			}
			
			function agent4move() {
				Agent4.speedX = 1.75;
			}

			function clearmove() {
				//Agent1.speedX = 0;
				//Agent2.speedX = 0;
				//Agent3.speedX = 0;
				//Agent4.speedX = 0;
			}
		</script>
		
		<div>
			<button onmousedown="agent1move()" onmouseup="clearmove()" ontouchstart="agent1move()">AGENT 1</button>
			<button onmousedown="agent2move()" onmouseup="clearmove()" ontouchstart="agent2move()">AGENT 2</button>
			<button onmousedown="agent3move()" onmouseup="clearmove()" ontouchstart="agent3move()">AGENT 3</button>
			<button onmousedown="agent4move()" onmouseup="clearmove()" ontouchstart="agent4move()">AGENT 4</button>
		</div>
		
	</body>
</html>